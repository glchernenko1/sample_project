import pytest
from src.Backend.app.models.deposit import Deposit
from src.Backend.app.services.deposit import calculate_deposit



class TestDepositsService:
    def test_calculate_deposit_one_mont(self):
        assert calculate_deposit(Deposit(date="01.01.2021", period=1, amount=10000, rate=6)) == {'01.02.2021': 10050.0}

    def test_calculate_deposit_two_mont(self):
        assert calculate_deposit(Deposit(date="01.01.2021", period=2, amount=10000, rate=6)) == {'01.02.2021': 10050.0,
                                                                                                 '01.03.2021': 10100.25}

    def test_calculate_deposit_last_day_mont(self):
        assert calculate_deposit(Deposit(date="31.12.2021", period=7, amount=10000, rate=6)) == {'31.01.2022': 10050.0,
                                                                                                 '28.02.2022': 10100.25,
                                                                                                 '31.03.2022': 10150.75,
                                                                                                 '30.04.2022': 10201.51,
                                                                                                 '31.05.2022': 10252.51,
                                                                                                 '30.06.2022': 10303.78,
                                                                                                 '31.07.2022': 10355.29}

    def test_calculate_deposit_two_year(self):
        assert calculate_deposit(Deposit(date="31.01.2021", period=12*3, amount=10000, rate=6)) == {
                                                                                                    '28.02.2021': 10050.0,
                                                                                                    '31.03.2021': 10100.25,
                                                                                                    '30.04.2021': 10150.75,
                                                                                                    '31.05.2021': 10201.51,
                                                                                                    '30.06.2021': 10252.51,
                                                                                                    '31.07.2021': 10303.78,
                                                                                                    '31.08.2021': 10355.29,
                                                                                                    '30.09.2021': 10407.07,
                                                                                                    '31.10.2021': 10459.11,
                                                                                                    '30.11.2021': 10511.4,
                                                                                                    '31.12.2021': 10563.96,
                                                                                                    '31.01.2022': 10616.78,
                                                                                                    '28.02.2022': 10669.86,
                                                                                                    '31.03.2022': 10723.21,
                                                                                                    '30.04.2022': 10776.83,
                                                                                                    '31.05.2022': 10830.71,
                                                                                                    '30.06.2022': 10884.87,
                                                                                                    '31.07.2022': 10939.29,
                                                                                                    '31.08.2022': 10993.99,
                                                                                                    '30.09.2022': 11048.96,
                                                                                                    '30.11.2022': 11159.72,
                                                                                                    '31.10.2022': 11104.2,
                                                                                                    '31.12.2022': 11215.52,
                                                                                                    '31.01.2023': 11271.6,
                                                                                                    '28.02.2023': 11327.96,
                                                                                                    '31.03.2023': 11384.6,
                                                                                                    '30.04.2023': 11441.52,
                                                                                                    '31.05.2023': 11498.73,
                                                                                                    '30.06.2023': 11556.22,
                                                                                                    '31.07.2023': 11614.0,
                                                                                                    '31.08.2023': 11672.07,
                                                                                                    '30.09.2023': 11730.43,
                                                                                                    '31.10.2023': 11789.08,
                                                                                                    '30.11.2023': 11848.03,
                                                                                                    '31.12.2023': 11907.27,
                                                                                                    '31.01.2024': 11966.81
                                                                                                    }















